
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RSA 복호화 시간 시뮬레이션</title>
  <style>
    :root {
      color-scheme: dark light;
      font-family: "Pretendard", "Segoe UI", sans-serif;
      --accent: #4f8cff;
      --accent-weak: rgba(79, 140, 255, 0.15);
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      background: radial-gradient(circle at top, #1f2937, #0f172a);
      color: #e2e8f0;
    }

    main {
      width: min(960px, 90vw);
      padding: 40px 32px 56px;
    }

    h1 {
      margin: 0 0 12px;
      font-size: clamp(1.8rem, 3vw, 2.4rem);
      letter-spacing: -0.02em;
    }

    p.lead {
      margin: 0 0 32px;
      font-size: 1rem;
      color: #cbd5f5;
      line-height: 1.6;
    }

    section.panel {
      background: rgba(15, 23, 42, 0.75);
      border: 1px solid rgba(148, 163, 184, 0.2);
      border-radius: 20px;
      padding: 28px;
      box-shadow: 0 25px 40px rgba(2, 6, 23, 0.55);
      backdrop-filter: blur(15px);
      margin-bottom: 28px;
    }

    .slider-group + .slider-group {
      margin-top: 20px;
    }

    label {
      display: flex;
      justify-content: space-between;
      font-size: 0.95rem;
      margin-bottom: 10px;
      color: #bfdbfe;
    }

    input[type="range"] {
      width: 100%;
      accent-color: var(--accent);
    }

    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 16px;
      margin-top: 24px;
    }

    .stat-card {
      border: 1px solid rgba(148, 163, 184, 0.2);
      border-radius: 14px;
      padding: 16px 18px;
      background: rgba(15, 23, 42, 0.65);
    }

    .stat-card span {
      display: block;
      font-size: 0.85rem;
      color: #94a3b8;
      margin-bottom: 8px;
    }

    .stat-card strong {
      font-size: 1.35rem;
    }

    .chart {
      margin-top: 32px;
      display: flex;
      flex-direction: column;
      gap: 18px;
    }

    .bar {
      display: flex;
      align-items: center;
      gap: 16px;
      font-size: 0.95rem;
    }

    .bar-track {
      position: relative;
      flex: 1;
      height: 24px;
      border-radius: 14px;
      background: rgba(148, 163, 184, 0.15);
      overflow: hidden;
    }

    .bar-fill {
      position: absolute;
      inset: 0 auto 0 0;
      width: 0;
      border-radius: inherit;
      background: linear-gradient(90deg, var(--accent), #7c3aed);
      transition: width 220ms ease;
    }

    .bar.small .bar-fill {
      background: linear-gradient(90deg, #38bdf8, #4f46e5);
    }

    .note,
    .meta {
      font-size: 0.85rem;
      color: #94a3b8;
      margin-top: 18px;
      line-height: 1.4;
    }

    .meta {
      margin-top: 12px;
      border-left: 2px solid rgba(148, 163, 184, 0.4);
      padding-left: 12px;
    }

    @media (max-width: 640px) {
      main {
        padding: 28px 16px 40px;
      }
    }
  </style>
</head>
<body>
  <main>
    <header>
      <h1>RSA 복호화 시간 감각 시뮬레이터</h1>
      <p class="lead">
        실제 거대 정수를 직접 계산하지 않고, <strong>상대적인 연산량</strong>을 바탕으로
        p, q 크기 변화가 복호화 시간에 미치는 영향을 빠르게 가늠할 수 있는 도구입니다.
      </p>
    </header>

    <section class="panel">
      <h2>프라임 크기 조절</h2>
      <div class="slider-group">
        <label>
          p 비트 길이
          <span id="pBitsLabel">1024 bit</span>
        </label>
        <input type="range" min="256" max="4096" step="64" value="1024" id="pBits" />
      </div>
      <div class="slider-group">
        <label>
          q 비트 길이
          <span id="qBitsLabel">1024 bit</span>
        </label>
        <input type="range" min="256" max="4096" step="64" value="1024" id="qBits" />
      </div>

      <div class="stats">
        <div class="stat-card">
          <span>모듈러스 n 비트 길이 (추정)</span>
          <strong id="nBits">2048 bit</strong>
        </div>
        <div class="stat-card">
          <span>암호화 시간 (추정)</span>
          <strong id="encTime">25 ms</strong>
        </div>
        <div class="stat-card">
          <span>복호화 시간 (추정)</span>
          <strong id="decTime">350 ms</strong>
        </div>
      </div>

      <p class="meta">
        모듈러스 <strong>n = p × q</strong>는 RSA 공개키의 핵심 크기를 결정하는 값입니다. 슬라이더로
        조절한 두 소수의 비트 길이를 합산해 n의 비트를 근사하고, 그 길이가 길수록 연산해야 할 숫자가
        커지기 때문에 암·복호화 시간이 함께 늘어납니다.
      </p>

      <div class="chart">
        <div class="bar">
          <span>암호화 시간</span>
          <div class="bar-track">
            <div class="bar-fill" id="encryptionBar"></div>
          </div>
          <span id="encryptionValue">25 ms</span>
        </div>
        <div class="bar small">
          <span>복호화 시간</span>
          <div class="bar-track">
            <div class="bar-fill" id="decryptionBar"></div>
          </div>
          <span id="decryptionValue">350 ms</span>
        </div>
      </div>

      <p class="note">
        • 복호화 시간은 모듈러스 비트 길이의 세제곱에 비례한다고 가정했습니다 (O(n³)), 2048비트 기준
          약 350&nbsp;ms를 베이스라인으로 잡았습니다.<br />
        • 암호화는 작은 공개 지수(e)를 쓰므로 제곱 복잡도(O(n²)) 모델에 25&nbsp;ms 베이스라인을
          적용했습니다.<br />
        • 실제 구현, 하드웨어, 파라미터 선택에 따라 절대 시간은 크게 달라질 수 있는 점을 감안하세요.
      </p>
    </section>
  </main>

  <script>
    const pBitsInput = document.getElementById("pBits");
    const qBitsInput = document.getElementById("qBits");
    const pBitsLabel = document.getElementById("pBitsLabel");
    const qBitsLabel = document.getElementById("qBitsLabel");
    const nBitsLabel = document.getElementById("nBits");
    const encTimeLabel = document.getElementById("encTime");
    const decTimeLabel = document.getElementById("decTime");
    const encryptionBar = document.getElementById("encryptionBar");
    const decryptionBar = document.getElementById("decryptionBar");
    const encryptionValueLabel = document.getElementById("encryptionValue");
    const decryptionValueLabel = document.getElementById("decryptionValue");

    const BASELINE_BITS = 2048; // 1024 + 1024
    const BASE_DEC_MS = 350;
    const BASE_ENC_MS = 25;

    function interpolateNBits(pBits, qBits) {
      const bigger = Math.max(pBits, qBits);
      const smaller = Math.min(pBits, qBits);
      // 실제 n 비트는 log2(p*q) = log2(p) + log2(q) ~ 합계에서 ±1 오차
      return bigger + smaller;
    }

    function computeDecryptionTime(nBits) {
      const ratio = nBits / BASELINE_BITS;
      return BASE_DEC_MS * Math.pow(ratio, 3);
    }

    function computeEncryptionTime(nBits) {
      const ratio = nBits / BASELINE_BITS;
      return BASE_ENC_MS * Math.pow(ratio, 2);
    }

    function formatTime(ms) {
      if (ms >= 1000) {
        return `${(ms / 1000).toFixed(2)} s`;
      }
      return `${Math.round(ms)} ms`;
    }

    function update() {
      const pBits = Number(pBitsInput.value);
      const qBits = Number(qBitsInput.value);
      const nBits = interpolateNBits(pBits, qBits);
      const encryptionMs = computeEncryptionTime(nBits);
      const decryptionMs = computeDecryptionTime(nBits);
      const encryptionRatio = encryptionMs / BASE_ENC_MS;
      const decryptionRatio = decryptionMs / BASE_DEC_MS;

      pBitsLabel.textContent = `${pBits.toLocaleString()} bit`;
      qBitsLabel.textContent = `${qBits.toLocaleString()} bit`;
      nBitsLabel.textContent = `${nBits.toLocaleString()} bit`;
      encTimeLabel.textContent = formatTime(encryptionMs);
      decTimeLabel.textContent = formatTime(decryptionMs);

      encryptionBar.style.width = `${Math.min(encryptionRatio * 60, 100)}%`;
      decryptionBar.style.width = `${Math.min(decryptionRatio * 45, 100)}%`;
      encryptionValueLabel.textContent = formatTime(encryptionMs);
      decryptionValueLabel.textContent = formatTime(decryptionMs);
    }

    pBitsInput.addEventListener("input", update);
    qBitsInput.addEventListener("input", update);
    update();
  </script>
</body>
</html>

